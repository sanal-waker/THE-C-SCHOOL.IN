"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[4854],{59386:(e,t,l)=>{var r=l(60040),a=l(41795),n=l(1251),o=l(45461),c=l(56781),u=l(77376);var s=l(48890),m=l(58521),d=l(32263);const i=({codeToCopy:e})=>{const t=n.useId(),l=n.useRef(null);return n.useEffect((()=>{!l.current||l.current.scrollHeight<=0||(l.current.style.height="1px",l.current.style.height=`${l.current.scrollHeight}px`)}),[e]),n.createElement("fieldset",null,n.createElement("legend",null,n.createElement("label",{htmlFor:t},"Copy and paste this code into your website"),n.createElement(m.$,{tooltipPosition:"bottom",text:e},n.createElement("button",{type:"button",className:"link"},"Copy embed code"))),n.createElement("textarea",{id:t,ref:l,"aria-label":"Widget code",readOnly:!0,value:e}),n.createElement("small",null,"We highly recommend you have an SSL certificate to increase buyer confidence."))};var p=l(77207),E=l(93419);var b=l(13599),f=l(12002),g=l(69648),y=l(3778),h=l(93419);const v="gumroad-follow-form-embed-input",_=({sellerId:e,preview:t})=>{const[l,r]=n.useState(""),a=(0,g.z8)(),o=n.useRef(null),c=n.useMemo((()=>{if(t)return;const e=document.getElementById("gumroad-follow-form-embed-button"),l=document.getElementById(v),r=document.getElementById("gumroad-follow-form-embed");return e&&l&&r?[...(0,f.g)(r)].map((([e,t])=>`#gumroad-follow-form-embed${e}{${t}}`)).join("")+[...(0,f.g)(e)].map((([e,t])=>`#gumroad-follow-form-embed-button${e}{${t}}`)).join("")+[...(0,f.g)(l)].map((([e,t])=>`#gumroad-follow-form-embed-input${e}{${t}}`)).join(""):void 0}),[]),u=t?"div":"form";return n.createElement(n.Fragment,null,c?n.createElement("style",{dangerouslySetInnerHTML:{__html:c}}):null,n.createElement(u,{className:"input-with-button",ref:o,action:h.follow_user_from_embed_form_url({host:a}),method:"post",id:"gumroad-follow-form-embed"},n.createElement("input",{type:"hidden",name:"seller_id",value:e}),n.createElement("input",{id:v,type:"email",placeholder:"Your email address",name:"email",value:l,onChange:e=>r(e.target.value)}),n.createElement(s.$,{id:"gumroad-follow-form-embed-button",color:"primary",type:"submit",onClick:(0,b.B)((async r=>{if(t){r.preventDefault();try{await(async(e,t)=>{if(!(await(0,p.Em)({url:E.follow_user_from_embed_form_path(),method:"POST",accept:"json",data:{seller_id:e,email:t}})).ok)throw new p.o3})(e,l),(0,y.S)("Check your inbox to confirm your follow request.","success")}catch(e){(0,p.k4)(e),(0,y.S)("Sorry, something went wrong. Please try again.","error")}}}))},"Follow")))};var w=l(93419);const k={widgets:"Widgets",ping:"Ping",api:"API"},S=({currentPage:e,children:t})=>n.createElement("main",null,n.createElement("header",null,n.createElement("h1",null,k[e]),n.createElement("div",{role:"tablist"},Object.entries(k).map((([t,l])=>n.createElement("a",{role:"tab","aria-selected":t===e,href:w[`${t}_path`](),key:t},l))))),t),I=({products:e,affiliatedProducts:t,selectedProductUrl:l,onProductSelectChange:r})=>{const a=n.useId();return n.createElement("fieldset",null,n.createElement("legend",null,n.createElement("label",{htmlFor:a},"Choose your product")),n.createElement("select",{id:a,value:l,onChange:l=>{const a=e.find((e=>e.url===l.target.value))||t.find((e=>e.url===l.target.value));return a&&r(a),!0}},n.createElement("optgroup",{label:"Your products"},e.map((e=>n.createElement("option",{key:e.url,value:e.url},e.name)))),0!==t.length?n.createElement("optgroup",{label:"Affiliated products"},t.map((e=>n.createElement("option",{key:e.url,value:e.url},e.name)))):null))};var C=l(5751),P=l.n(C),$=l(35469);const x=({tab:e,setTab:t,overlayTabpanelUID:l,embedTabpanelUID:r})=>{const a=(e,l)=>{e.preventDefault(),t(l)};return n.createElement("div",{className:"tab-buttons",role:"tablist"},n.createElement(s.$,{onClick:e=>a(e,"overlay"),className:P()("overlay"===e?"selected":null),role:"tab","aria-selected":"overlay"===e,"aria-controls":l},n.createElement($.I,{name:"stickies"}),n.createElement("div",null,n.createElement("h4",{className:"tab-title"},"Modal Overlay"),n.createElement("small",null,"Pop up product information with a familiar and trusted buying experience."))),n.createElement(s.$,{onClick:e=>a(e,"embed"),className:P()("embed"===e?"selected":null),role:"tab","aria-selected":"embed"===e,"aria-controls":r},n.createElement($.I,{name:"code-square"}),n.createElement("div",null,n.createElement("h4",{className:"tab-title"},"Embed"),n.createElement("small",null,"Embed on your website, blog posts & more."))))},T=e=>{const[t,l]=n.useState(!0);return n.useEffect((()=>l(!0)),e),n.useEffect((()=>l(!1)),[t]),t};var U=l(93419);const B=({display_product_select:e,products:t,affiliated_products:l,default_product:r})=>{const[a,o]=n.useState(r),[c,u]=n.useState("overlay"),s=n.useId(),m=n.useId(),d=n.createElement(I,{selectedProductUrl:a.url,products:t,affiliatedProducts:l,onProductSelectChange:o});return n.createElement(n.Fragment,null,n.createElement(x,{tab:c,setTab:u,overlayTabpanelUID:s,embedTabpanelUID:m}),n.createElement("div",{role:"tabpanel",id:s,style:{display:"overlay"===c?"grid":"none",gap:"var(--spacer-6)"}},e?d:null,n.createElement(F,{selectedProduct:a})),n.createElement("div",{role:"tabpanel",id:m,style:{display:"embed"===c?"grid":"none",gap:"var(--spacer-6)"}},e?d:null,n.createElement(N,{selectedProduct:a})))},F=({selectedProduct:e})=>{const[t,l]=n.useState(!1),[r,a]=n.useState(""),[o,c]=n.useState(""),[u,s]=n.useState(""),m=n.useId(),d=n.useId();n.useEffect((()=>{const{script_base_url:l,url:a}=e;c((({scriptBaseUrl:e,productUrl:t,isWanted:l,buttonText:r})=>{let a=`<script src="${e}/js/gumroad.js"><\/script>\n`;return a+=`<a class="gumroad-button" href="${t}"${l?' data-gumroad-overlay-checkout="true"':""}>`,a+=r||"Buy on",a+="</a>",a})({scriptBaseUrl:l,productUrl:a,isWanted:t,buttonText:r}))}),[e,r,t]),n.useEffect((()=>s(e.gumroad_domain_url)),[e,t]);const p=T([u,t]);return n.createElement(n.Fragment,null,n.createElement("div",{style:{display:"flex",flexWrap:"wrap",gap:"var(--spacer-5)"}},n.createElement("fieldset",{style:{flexGrow:1}},n.createElement("legend",null,n.createElement("label",{htmlFor:m},"Button text")),n.createElement("input",{id:m,type:"text",placeholder:"Buy on",value:r,onChange:e=>a(e.target.value)})),n.createElement("fieldset",null,n.createElement("legend",null,n.createElement("label",{htmlFor:d},"Button Preview")),p?null:n.createElement("a",{id:d,href:u,className:"gumroad-button","data-gumroad-overlay-checkout":t},n.createElement("span",null,r||"Buy on")))),n.createElement(i,{codeToCopy:o}),n.createElement("fieldset",{style:{display:"grid",gap:"var(--spacer-4)"}},n.createElement("label",null,n.createElement("input",{type:"checkbox",checked:t,onChange:e=>l(e.target.checked),role:"switch"}),"Send directly to checkout page")))},N=({selectedProduct:e})=>{const[t,l]=n.useState("");n.useEffect((()=>{const{script_base_url:t,url:r}=e;l((({scriptBaseUrl:e,productUrl:t})=>{let l=`<script src="${e}/js/gumroad-embed.js"><\/script>\n`;return l+=`<div class="gumroad-product-embed"><a href="${t}">`,l+="Loading...",l+="</a></div>",l})({scriptBaseUrl:t,productUrl:r}))}),[e]);const r=T([e.url]);return n.createElement(n.Fragment,null,n.createElement("div",{className:"embed-preview-wrapper"},r?null:n.createElement("div",null,n.createElement("div",{className:"gumroad-product-embed"},n.createElement("a",{href:e.url},"Loading...")))),n.createElement(i,{codeToCopy:t}))},j=(0,u.k)({component:({display_product_select:e,products:t,affiliated_products:l,default_product:r})=>{const a=(0,d.wi)(),c=(0,g.lO)(),u=n.useId(),i=n.useId(),[p,E]=n.useState("");return n.useEffect((()=>E(a?o.renderToString(n.createElement(g.Hx,{value:c},n.createElement(_,{sellerId:a.id}))):"")),[a]),n.createElement(S,{currentPage:"widgets"},n.createElement("form",null,n.createElement("section",null,n.createElement("header",null,n.createElement("h3",null,"Share your product"),n.createElement("p",null,"You can easily bring the Gumroad purchase page right into your site, without directing your buyers elsewhere. ",n.createElement("a",{"data-helper-prompt":"How can I build Gumroad into my website?"},"Learn more"))),n.createElement("div",null,n.createElement(B,{display_product_select:e,products:t,affiliated_products:l,default_product:r}))),a?n.createElement("section",null,n.createElement("header",null,n.createElement("h3",null,"Subscribe form"),n.createElement("p",null,"Share your subscribe form on any website or blog using an embed or URL."," ",n.createElement("a",{"data-helper-prompt":"How can I share my subscribe form?"},"Learn more"))),n.createElement("fieldset",null,n.createElement("legend",null,n.createElement("label",{htmlFor:u},"Share your subscribe page and grow your audience")),n.createElement(m.$,{text:U.custom_domain_subscribe_url({host:a.subdomain}),copyTooltip:"Copy link",tooltipPosition:"bottom"},n.createElement(s.$,{id:u,color:"primary"},n.createElement($.I,{name:"link"}),"Copy link"))),n.createElement("fieldset",null,n.createElement("legend",null,n.createElement("label",{htmlFor:v},"Test your subscribe form with your email")),n.createElement(_,{sellerId:a.id,preview:!0})),n.createElement("fieldset",null,n.createElement("legend",null,n.createElement("label",{htmlFor:i},"Subscribe form embed code"),n.createElement(m.$,{text:p,copyTooltip:"Copy to Clipboard",tooltipPosition:"top"},n.createElement("button",{type:"button",className:"link"},"Copy embed code"))),n.createElement("textarea",{id:i,value:p,readOnly:!0}))):null))},propParser:(0,c.ix)([5,[0,"default_product",[5,[0,"name",0],[0,"script_base_url",0],[0,"url",0],[0,"gumroad_domain_url",0]]],[0,"display_product_select",2],[0,"products",[6,[12,1,2]]],[0,"affiliated_products",[6,[12,1,2]]]])});a.A.initialize(),r.default.register({DeveloperWidgetsPage:j})}},e=>{e.O(0,[8281],(()=>{return t=59386,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=widgets-7fdd44e39cd3de712c63.js.map