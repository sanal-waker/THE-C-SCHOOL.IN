"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[3787],{1129:(e,t,a)=>{var r=a(60040),n=a(41795),l=a(1251),o=a(56781),i=a(77207),s=a(93419);var c=a(77376),m=a(4320),u=a(82878),p=a(93419);const d=()=>{const e=new URL((0,u.o)()).searchParams.get("next");return l.createElement("section",{className:"paragraphs"},l.createElement(m.I,{provider:"facebook",href:p.user_facebook_omniauth_authorize_path({referer:e})},"Facebook"),l.createElement(m.I,{provider:"google",href:p.user_google_oauth2_omniauth_authorize_path({referer:e,x_auth_access_type:"read"})},"Google"),l.createElement(m.I,{provider:"twitter",href:p.user_twitter_omniauth_authorize_path({referer:e,x_auth_access_type:"read"})},"X"),l.createElement(m.I,{provider:"stripe",href:p.user_stripe_connect_omniauth_authorize_path({referer:e})},"Stripe"))};var g=a(48890),h=a(3778);const E=({onClose:e})=>{const t=l.useId(),[a,r]=l.useState(""),[n,c]=l.useState({type:"initial"}),m=async e=>{e.preventDefault(),c({type:"submitting"});try{await(async e=>{const t=await(0,i.Em)({method:"POST",url:s.forgot_password_path(),accept:"json",data:{user:{email:e}}});if(!t.ok){const{error_message:e}=(0,o.wg)(await t.json(),[5,[0,"error_message",0]]);throw new i.o3(e)}})(a),(0,h.S)("Password reset sent! Please make sure to check your spam folder.","success"),c({type:"initial"})}catch(e){(0,i.k4)(e),c({type:"error",message:e.message})}};return l.createElement("form",{onSubmit:e=>{m(e)}},l.createElement(d,null),l.createElement("div",{role:"separator"},l.createElement("span",null,"or")),l.createElement("section",null,"error"===n.type?l.createElement("div",{role:"alert",className:"danger"},n.message):null,l.createElement("fieldset",null,l.createElement("legend",null,l.createElement("label",{htmlFor:t},"Email to send reset instructions to")),l.createElement("input",{id:t,type:"email",value:a,onChange:e=>r(e.target.value),required:!0})),l.createElement(g.$,{color:"primary",type:"submit",disabled:"submitting"===n.type},"submitting"===n.type?"Sending...":"Send"),l.createElement(g.$,{onClick:e},"Cancel")))};var y=a(69648);const _=a.p+"static/822e112a3b444c69f7ef.png",w=({children:e,header:t})=>{const{rootDomain:a,scheme:r}=(0,y.lO)();return l.createElement(l.Fragment,null,l.createElement("main",{className:"squished"},l.createElement("header",null,l.createElement("a",{href:`${r}://${a}`,className:"logo-full","aria-label":"Gumroad"}),t),l.createElement("div",null,e)),l.createElement("aside",null,l.createElement("img",{src:_})))};var f=a(67427),b=a(93419);const v=(0,c.k)({component:({email:e,application_name:t,recaptcha_site_key:a})=>{const r=new URL((0,u.o)()).searchParams.get("next"),n=(0,f.V)({siteKey:a}),c=l.useId(),[m,p]=l.useState(null!=e?e:""),[h,y]=l.useState(""),[_,v]=l.useState({type:"initial"}),[k,S]=l.useState(!1),x=async e=>{e.preventDefault(),v({type:"submitting"});try{const e=null!==a?await n.execute():null,{redirectLocation:t}=await(async e=>{const t=await(0,i.Em)({method:"POST",url:s.login_path(),accept:"json",data:{user:{login_identifier:e.email,password:e.password},next:e.next,"g-recaptcha-response":e.recaptchaResponse}});if(!t.ok){const{error_message:e}=(0,o.wg)(await t.json(),[5,[0,"error_message",0]]);throw new i.o3(e)}const{redirect_location:a}=(0,o.wg)(await t.json(),[5,[0,"redirect_location",0]]);return{redirectLocation:a}})({email:m,password:h,recaptchaResponse:e,next:r});window.location.href=t}catch(e){if(e instanceof f.B)return v({type:"initial"});(0,i.k4)(e),v({type:"error",message:e.message})}};return l.createElement(w,{header:l.createElement(l.Fragment,null,l.createElement("div",{className:"actions"},l.createElement("a",{href:b.signup_path({next:r})},"Sign up")),l.createElement("h1",null,t?`Connect ${t} to Gumroad`:"Log in"))},k?l.createElement(E,{onClose:()=>S(!1)}):l.createElement("form",{onSubmit:e=>{x(e)}},l.createElement(d,null),l.createElement("div",{role:"separator"},l.createElement("span",null,"or")),l.createElement("section",null,"error"===_.type?l.createElement("div",{role:"alert",className:"danger"},_.message):null,l.createElement("fieldset",null,l.createElement("legend",null,l.createElement("label",{htmlFor:`${c}-email`},"Email")),l.createElement("input",{id:`${c}-email`,type:"email",value:m,onChange:e=>p(e.target.value),required:!0,tabIndex:1})),l.createElement("fieldset",null,l.createElement("legend",null,l.createElement("label",{htmlFor:`${c}-password`},"Password"),l.createElement("button",{type:"button",className:"link",onClick:()=>S(!0)},"Forgot your password?")),l.createElement("input",{id:`${c}-password`,type:"password",value:h,onChange:e=>y(e.target.value),required:!0,tabIndex:1})),l.createElement(g.$,{color:"primary",type:"submit",disabled:"submitting"===_.type},"submitting"===_.type?"Logging in...":"Login"))),n.container)},propParser:(0,o.ix)([5,[0,"email",[9,[8,null],0]],[0,"application_name",[9,[8,null],0]],[0,"recaptcha_site_key",[9,[8,null],0]]])});var k=a(98282),S=a(89655),x=a(93419);const $=(0,c.k)({component:({email:e,application_name:t,referrer:a,stats:{number_of_creators:r,total_made:n},recaptcha_site_key:o})=>{const s=new URL((0,u.o)()).searchParams.get("next"),c=(0,f.V)({siteKey:o}),m=l.useId(),[p,h]=l.useState(null!=e?e:""),[E,y]=l.useState(""),[_,b]=l.useState({type:"initial"});return l.createElement(w,{header:l.createElement(l.Fragment,null,l.createElement("div",{className:"actions"},l.createElement("a",{href:x.login_path({next:s})},"Log in")),l.createElement("h1",null,a?`Join ${a.name} on Gumroad`:t?`Sign up for Gumroad and connect ${t}`:`Join over ${r.toLocaleString()} creators who have earned over ${(0,S.$g)("$",n,0,{noCentsIfWhole:!0})} on Gumroad selling digital products and memberships.`))},l.createElement("form",{onSubmit:e=>{(async e=>{var t;e.preventDefault(),b({type:"submitting"});try{const e=null!==o?await c.execute():null,{redirectLocation:r}=await(0,k._)({email:p,password:E,recaptchaResponse:e,termsAccepted:!0,next:s,referrerId:null!=(t=null==a?void 0:a.id)?t:null});window.location.href=r}catch(e){if(e instanceof f.B)return b({type:"initial"});(0,i.k4)(e),b({type:"error",message:e.message})}})(e)}},l.createElement(d,null),l.createElement("div",{role:"separator"},l.createElement("span",null,"or")),l.createElement("section",null,"error"===_.type?l.createElement("div",{role:"alert",className:"danger"},_.message):null,l.createElement("fieldset",null,l.createElement("legend",null,l.createElement("label",{htmlFor:`${m}-email`},"Email")),l.createElement("input",{id:`${m}-email`,type:"email",value:p,onChange:e=>h(e.target.value),required:!0})),l.createElement("fieldset",null,l.createElement("legend",null,l.createElement("label",{htmlFor:`${m}-password`},"Password")),l.createElement("input",{id:`${m}-password`,type:"password",value:E,onChange:e=>y(e.target.value),required:!0})),l.createElement(g.$,{color:"primary",type:"submit",disabled:"submitting"===_.type},"submitting"===_.type?"Creating...":"Create account"),l.createElement("p",null,"You agree to our ",l.createElement("a",{href:"https://gumroad.com/terms"},"Terms of Use")," and"," ",l.createElement("a",{href:"https://gumroad.com/privacy"},"Privacy Policy"),"."))),c.container)},propParser:(0,o.ix)([5,[0,"email",[9,[8,null],0]],[0,"application_name",[9,[8,null],0]],[0,"referrer",[9,[8,null],[5,[0,"id",0],[0,"name",0]]]],[0,"stats",[5,[0,"number_of_creators",1],[0,"total_made",1]]],[0,"recaptcha_site_key",[9,[8,null],0]]])}),P=(0,c.k)({component:({user_id:e,email:t,token:a})=>{const r=new URL((0,u.o)()).searchParams.get("next"),n=l.useId(),[c,m]=l.useState(null!=a?a:""),[p,d]=l.useState({type:"initial"}),E=async t=>{t.preventDefault(),d({type:"submitting"});try{const{redirectLocation:t}=await(async e=>{const t=await(0,i.Em)({method:"POST",url:s.two_factor_path("json",{user_id:e.user_id}),accept:"json",data:{token:e.token,next:e.next}});if(!t.ok){const{error_message:e}=(0,o.wg)(await t.json(),[5,[0,"error_message",0]]);throw new i.o3(e)}const{redirect_location:a}=(0,o.wg)(await t.json(),[5,[0,"redirect_location",0]]);return{redirectLocation:a}})({user_id:e,token:c,next:r});window.location.href=t}catch(e){(0,i.k4)(e),d({type:"error",message:e.message})}},y=async()=>{d({type:"submitting"});try{await(async e=>{if(!(await(0,i.Em)({method:"POST",url:s.resend_authentication_token_path("json",{user_id:e}),accept:"json"})).ok)throw new i.o3})(e),(0,h.S)("Resent the authentication token, please check your inbox.","success")}catch(e){(0,i.k4)(e),(0,h.S)(e.message,"error")}d({type:"initial"})};return l.createElement(w,{header:l.createElement(l.Fragment,null,l.createElement("h1",null,"Two-Factor Authentication"),l.createElement("h3",null,"To protect your account, we have sent an Authentication Token to ",t,". Please enter it here to continue."))},l.createElement("form",{onSubmit:e=>{E(e)}},l.createElement("section",null,"error"===p.type?l.createElement("div",{role:"alert",className:"danger"},p.message):null,l.createElement("fieldset",null,l.createElement("legend",null,l.createElement("label",{htmlFor:n},"Authentication Token")),l.createElement("input",{id:n,type:"text",value:c,onChange:e=>m(e.target.value),required:!0,autoFocus:!0})),l.createElement(g.$,{color:"primary",type:"submit",disabled:"submitting"===p.type},"submitting"===p.type?"Logging in...":"Login"),l.createElement(g.$,{disabled:"submitting"===p.type,onClick:()=>{y()}},"Resend Authentication Token"))))},propParser:(0,o.ix)([5,[0,"user_id",0],[0,"email",0],[0,"token",[9,[8,null],0]]])});n.A.initialize(),r.default.register({SignupPage:$,LoginPage:v,TwoFactorAuthenticationPage:P})}},e=>{e.O(0,[8281],(()=>{return t=1129,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=signup-aebdd9217661fe7ec50d.js.map